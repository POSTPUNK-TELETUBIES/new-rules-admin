<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.0">
<title data-rh="true">Memoria técnica de la verificación de número de líneas modificadas en el pull request | Rules admin documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://postpunk-teletubies.github.io/new-rules-admin/wiki/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://postpunk-teletubies.github.io/new-rules-admin/wiki/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://postpunk-teletubies.github.io/new-rules-admin/wiki/blog/technical-memory-pr-check"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="es"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Memoria técnica de la verificación de número de líneas modificadas en el pull request | Rules admin documentation"><meta data-rh="true" name="description" content="1. Iniciar action workflow"><meta data-rh="true" property="og:description" content="1. Iniciar action workflow"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2024-01-19T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/jaenfigueroa"><link data-rh="true" rel="icon" href="/new-rules-admin/wiki/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://postpunk-teletubies.github.io/new-rules-admin/wiki/blog/technical-memory-pr-check"><link data-rh="true" rel="alternate" href="https://postpunk-teletubies.github.io/new-rules-admin/wiki/blog/technical-memory-pr-check" hreflang="en"><link data-rh="true" rel="alternate" href="https://postpunk-teletubies.github.io/new-rules-admin/wiki/es/blog/technical-memory-pr-check" hreflang="es"><link data-rh="true" rel="alternate" href="https://postpunk-teletubies.github.io/new-rules-admin/wiki/blog/technical-memory-pr-check" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/new-rules-admin/wiki/blog/rss.xml" title="Rules admin documentation RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/new-rules-admin/wiki/blog/atom.xml" title="Rules admin documentation Atom Feed"><link rel="stylesheet" href="/new-rules-admin/wiki/assets/css/styles.ca2a50d5.css">
<script src="/new-rules-admin/wiki/assets/js/runtime~main.12141ac4.js" defer="defer"></script>
<script src="/new-rules-admin/wiki/assets/js/main.1a78362f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fFcq" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/new-rules-admin/wiki/"><div class="navbar__logo"><img src="/new-rules-admin/wiki/img/layout_set_logo.png" alt="My Site Logo" class="themedComponent_T9Uj themedComponent--light_LnQX"><img src="/new-rules-admin/wiki/img/layout_set_logo.png" alt="My Site Logo" class="themedComponent_T9Uj themedComponent--dark_LeW_"></div></a><a class="navbar__item navbar__link" href="/new-rules-admin/wiki/docs/intro">Tutorial</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/new-rules-admin/wiki/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_fBYE"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_AWYJ"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/new-rules-admin/wiki/blog/technical-memory-pr-check" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/new-rules-admin/wiki/es/blog/technical-memory-pr-check" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="es">Español</a></li></ul></div><div class="toggle_w9gV colorModeToggle_GTFp"><button class="clean-btn toggleButton_oyKt toggleButtonDisabled_la5x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_JoUS"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_Lk8D"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_PGX9"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_OiuO"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_b94v thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_dLOI margin-bottom--md">Recent posts</div><ul class="sidebarItemList_QcHv clean-list"><li class="sidebarItem_QCIR"><a aria-current="page" class="sidebarItemLink_An1D sidebarItemLinkActive_KFsD" href="/new-rules-admin/wiki/blog/technical-memory-pr-check">Memoria técnica de la verificación de número de líneas modificadas en el pull request</a></li><li class="sidebarItem_QCIR"><a class="sidebarItemLink_An1D" href="/new-rules-admin/wiki/blog/probot-to-github-actions">¿Por que se cambió de probot a actions?</a></li><li class="sidebarItem_QCIR"><a class="sidebarItemLink_An1D" href="/new-rules-admin/wiki/blog/self-studying">Self-studying</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="https://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="https://schema.org/BlogPosting"><meta itemprop="description" content="1. Iniciar action workflow"><header><h1 class="title_QRDe" itemprop="headline">Memoria técnica de la verificación de número de líneas modificadas en el pull request</h1><div class="container_KY_w margin-vert--md"><time datetime="2024-01-19T00:00:00.000Z" itemprop="datePublished">January 19, 2024</time> · <!-- -->4 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_VUpU"><div class="avatar margin-bottom--sm"><a href="https://github.com/jaenfigueroa" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://avatars.githubusercontent.com/u/69079292?v=4" alt="Jaen Figueroa" itemprop="image"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/jaenfigueroa" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Jaen Figueroa</span></a></div><small class="avatar__subtitle" itemprop="description">Frontend Developer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown" itemprop="articleBody"><h2 class="anchor anchorWithStickyNavbar_S78e" id="1-iniciar-action-workflow">1. Iniciar action workflow<a href="#1-iniciar-action-workflow" class="hash-link" aria-label="Direct link to 1. Iniciar action workflow" title="Direct link to 1. Iniciar action workflow">​</a></h2>
<ul>
<li>Este archivo yml se ejecutará la primera vez que se cree un nuevo pull request, también cada vez que se actualize el pr</li>
<li>Damos los permisos de escritura</li>
<li>Designamos el entorno de ejecución</li>
<li>Declaramos las variables de entorno que vamos a usar para las tareas</li>
<li>Indicamos la versión de actions que vamos a usar</li>
</ul>
<div class="language-yml codeBlockContainer_VH3w theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_IeiA"><pre tabindex="0" class="prism-code language-yml codeBlock_UFES thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YJZW"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">pull_request</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> write</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">all</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">check_pr_size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">GITHUB_TOKEN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> secrets.GITHUB_TOKEN </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">MAX_LINES_PR</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> vars.MAX_LINES_PR </span><span class="token punctuation" style="color:#393A34">|</span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> 600 </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">PR_COMMENTS_URL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.event.pull_request.comments_url </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">PR_ADDITIONS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.event.pull_request.additions </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">PR_DELETIONS</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.event.pull_request.deletions </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">fetch-depth</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">...</span><span class="token plain"> more tasks</span><br></span></code></pre><div class="buttonGroup_xl51"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RYWu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vdpF"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_p2eM"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_S78e" id="2-obtener-el-total-de-numero-de-líneas-cambiadas-de-todos-los-archivos-de-tipo-lock">2. Obtener el total de numero de líneas cambiadas de todos los archivos de tipo lock<a href="#2-obtener-el-total-de-numero-de-líneas-cambiadas-de-todos-los-archivos-de-tipo-lock" class="hash-link" aria-label="Direct link to 2. Obtener el total de numero de líneas cambiadas de todos los archivos de tipo lock" title="Direct link to 2. Obtener el total de numero de líneas cambiadas de todos los archivos de tipo lock">​</a></h2>
<ul>
<li>Tenemos un script que ejecuta <code>git diff --stat origin/NOMBRE_RAMA</code>, de donde vamos a obtener el numero de líneas cambiadas de todos lo archivos de tipo lock</li>
<li>El resultado se guardará dentro de una variable PR_MODIFY_LOCK, luego lo guardamos como una nueva variable de entorno</li>
</ul>
<div class="language-yml codeBlockContainer_VH3w theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_IeiA"><pre tabindex="0" class="prism-code language-yml codeBlock_UFES thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YJZW"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Obtain the total number of modified lines of the lock files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">PR_DESTINATION_BRANCH</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.event.pull_request.base.ref </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    chmod +x bash-scripts/lines-of-lock.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    PR_MODIFY_LOCK=$(bash</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">scripts/lines</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">of</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">lock.sh)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;PR_MODIFY_LOCK=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">PR_MODIFY_LOCK</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&quot; </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> $GITHUB_ENV</span><br></span></code></pre><div class="buttonGroup_xl51"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RYWu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vdpF"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_p2eM"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_S78e" id="3-calcular-los-valores-para-el-reporte">3. Calcular los valores para el reporte<a href="#3-calcular-los-valores-para-el-reporte" class="hash-link" aria-label="Direct link to 3. Calcular los valores para el reporte" title="Direct link to 3. Calcular los valores para el reporte">​</a></h2>
<ul>
<li>Calculamos el numero de lienas editadas en total</li>
<li>Calculamos el numero de líneas editadas sin contar el numero de líneas editadas de tipo lock</li>
<li>Calculamos el numero de líneas restantes</li>
<li>Finalmente los guardamos como nuevas variables de entorno</li>
</ul>
<div class="language-yml codeBlockContainer_VH3w theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_IeiA"><pre tabindex="0" class="prism-code language-yml codeBlock_UFES thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YJZW"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Obtaining missing data for reporting purposes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    PR_MODIFY_ALL=$(($PR_ADDITIONS + $PR_DELETIONS))</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    PR_MODIFY_REST=$(($PR_MODIFY_ALL - $PR_MODIFY_LOCK))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> $PR_MODIFY_REST </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">gt $MAX_LINES_PR </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PR_EXTRA=$(($PR_MODIFY_REST </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> $MAX_LINES_PR))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        PR_EXTRA=0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;PR_MODIFY_ALL=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">PR_MODIFY_ALL</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&quot; </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> $GITHUB_ENV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;PR_MODIFY_REST=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">PR_MODIFY_REST</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&quot; </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> $GITHUB_ENV</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;PR_EXTRA=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">PR_EXTRA</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&quot; </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> $GITHUB_ENV</span><br></span></code></pre><div class="buttonGroup_xl51"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RYWu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vdpF"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_p2eM"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_S78e" id="4-generar-el-mensaje-que-se-va-mostrar-en-el-reporte">4. Generar el mensaje que se va mostrar en el reporte<a href="#4-generar-el-mensaje-que-se-va-mostrar-en-el-reporte" class="hash-link" aria-label="Direct link to 4. Generar el mensaje que se va mostrar en el reporte" title="Direct link to 4. Generar el mensaje que se va mostrar en el reporte">​</a></h2>
<ul>
<li>Primero generamos la nota, para el reporte</li>
<li>Usamos la plantilla que tenemos del reporte y haciendo uso de sed vamos a reemplazar las variables</li>
<li>Finamente guardamos el mensaje como una nueva variable de entorno</li>
</ul>
<div class="language-yml codeBlockContainer_VH3w theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_IeiA"><pre tabindex="0" class="prism-code language-yml codeBlock_UFES thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YJZW"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Generate the message for commenting on the pr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    if [[ $PR_MODIFY_REST -gt $MAX_LINES_PR ]]; then</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      NOTE=&quot;@${{ github.actor }} Ups, tu pull request tiene más de $MAX_LINES_PR líneas modificadas, tienes un total de $PR_MODIFY_REST, considera dividir este pull request.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    else</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      NOTE=&quot;Perfecto, el pull request no sobrepasa las $MAX_LINES_PR líneas modificadas.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    MESSAGE=$(sed \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">a;N;$</span><span class="token tag" style="color:#00009f">!ba;s/</span><span class="token plain">\r//g&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &#x27;s/\n/\\n/g&#x27; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;s/NOTE/$NOTE/&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;s/PR_ADDITIONS/$PR_ADDITIONS/&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;s/PR_DELETIONS/$PR_DELETIONS/&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;s/PR_MODIFY_ALL/$PR_MODIFY_ALL/&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;s/PR_MODIFY_LOCK/$PR_MODIFY_LOCK/&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;s/PR_MODIFY_REST/$PR_MODIFY_REST/&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">e &quot;s/PR_EXTRA/$PR_EXTRA/&quot; templates/pr</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">report.md)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &quot;MESSAGE=$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">MESSAGE</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">&quot; </span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"> $GITHUB_ENV</span><br></span></code></pre><div class="buttonGroup_xl51"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RYWu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vdpF"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_p2eM"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_S78e" id="5-eliminar-los-reportes-anteriores-de-los-comentarios">5. Eliminar los reportes anteriores de los comentarios<a href="#5-eliminar-los-reportes-anteriores-de-los-comentarios" class="hash-link" aria-label="Direct link to 5. Eliminar los reportes anteriores de los comentarios" title="Direct link to 5. Eliminar los reportes anteriores de los comentarios">​</a></h2>
<ul>
<li>Realizamos una petición para obtener una lista de todos los comentarios</li>
<li>Filtramos la lista por los que contengan la frase &quot;Resultados de la pre-revisión del PR&quot;</li>
<li>Obtenemos una lista de IDs de los comentarios restantes</li>
<li>Recorremos la lista para eliminar cada uno de ellos</li>
</ul>
<div class="language-yml codeBlockContainer_VH3w theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_IeiA"><pre tabindex="0" class="prism-code language-yml codeBlock_UFES thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YJZW"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Remove previous reports from comments</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    COMMENTS=$(curl -L \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        -H &quot;Accept: application/vnd.github+json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        -H &quot;Authorization: token $GITHUB_TOKEN&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        -H &quot;X-GitHub-Api-Version: 2022-11-28&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        $PR_COMMENTS_URL | jq &#x27;.[] | select(.body | contains(&quot;Resultados de la pre-revisión del PR&quot;))&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    COMMENTS_ID=$(echo &quot;$COMMENTS&quot; </span><span class="token punctuation" style="color:#393A34">|</span><span class="token plain"> jq </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">r &#x27;.id&#x27;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    IFS=$&#x27;\n&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for ID in $COMMENTS_ID; do</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        COMMENT_URL=&quot;$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.api_url </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/repos/$</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> github.repository </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">/issues/comments/$ID&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        curl </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">L \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">X DELETE \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">-H &quot;Accept</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> application/vnd.github+json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">-H &quot;Authorization</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> token $GITHUB_TOKEN&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">-H &quot;X-GitHub-Api-Version</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 2022</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">11</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">28&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            $COMMENT_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    done</span><br></span></code></pre><div class="buttonGroup_xl51"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RYWu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vdpF"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_p2eM"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_S78e" id="6-mostramos-el-reporte-como-comentario-en-el-pull-request">6. Mostramos el reporte como comentario en el pull request<a href="#6-mostramos-el-reporte-como-comentario-en-el-pull-request" class="hash-link" aria-label="Direct link to 6. Mostramos el reporte como comentario en el pull request" title="Direct link to 6. Mostramos el reporte como comentario en el pull request">​</a></h2>
<ul>
<li>Realizamos una petición para agregar el nuevo mensaje, enviando el mensaje que guardamos antes como una variable de entorno</li>
</ul>
<div class="language-yml codeBlockContainer_VH3w theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_IeiA"><pre tabindex="0" class="prism-code language-yml codeBlock_UFES thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YJZW"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Shows the report as a comment in the pr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    curl \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    -X POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    $PR_COMMENTS_URL \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    -H &quot;Content-Type: application/json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    -H &quot;Authorization: token $GITHUB_TOKEN&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    --data &quot;{ \&quot;body\&quot;: \&quot;$MESSAGE\&quot; }&quot;</span><br></span></code></pre><div class="buttonGroup_xl51"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RYWu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vdpF"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_p2eM"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_S78e" id="7-comprobar-si-la-cantidad-de-líneas-modificadas-no-sobrepasa-el-limite">7. Comprobar si la cantidad de líneas modificadas no sobrepasa el limite<a href="#7-comprobar-si-la-cantidad-de-líneas-modificadas-no-sobrepasa-el-limite" class="hash-link" aria-label="Direct link to 7. Comprobar si la cantidad de líneas modificadas no sobrepasa el limite" title="Direct link to 7. Comprobar si la cantidad de líneas modificadas no sobrepasa el limite">​</a></h2>
<ul>
<li>Comprobamos que el numero de líneas modificadas no superé el limite establecido, en caso se superé el limite mostrar un error de tal manera que no permita realizar el merge, hasta que se realizen las modificaciones</li>
</ul>
<div class="language-yml codeBlockContainer_VH3w theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_IeiA"><pre tabindex="0" class="prism-code language-yml codeBlock_UFES thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_YJZW"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Stop the execution of the workflow if the limit of modified lines is exceeded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    if [[ $PR_MODIFY_REST -gt $MAX_LINES_PR ]]</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    then</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        echo &quot;Warning - total lines changed is greater than&quot; $MAX_LINES_PR.</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        echo &quot;Please consider breaking this PR down.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">        exit 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">    fi</span><br></span></code></pre><div class="buttonGroup_xl51"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_RYWu" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_vdpF"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_p2eM"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_S78e" id="8-resultados">8. Resultados<a href="#8-resultados" class="hash-link" aria-label="Direct link to 8. Resultados" title="Direct link to 8. Resultados">​</a></h2>
<ul>
<li>Si el numero de líneas modificadas no supera el limite establecido</li>
</ul>
<p><img loading="lazy" alt="image" src="/new-rules-admin/wiki/assets/images/pr-report-ok-0928feb29159f3ef414d9b989771c88e.png" width="1044" height="758" class="img_TIDR"></p>
<ul>
<li>Si el numero de líneas modificadas supera el limite establecido</li>
</ul>
<p><img loading="lazy" alt="image" src="/new-rules-admin/wiki/assets/images/pr-report-error-785f23cb99fb07053fd242c445909d79.png" width="1052" height="738" class="img_TIDR"></p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_Slqn"><div class="col margin-top--sm"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2024-1-19-technical-memory-pr-check.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_HIOW" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--next" href="/new-rules-admin/wiki/blog/probot-to-github-actions"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">¿Por que se cambió de probot a actions?</div></a></nav></main><div class="col col--2"><div class="tableOfContents_qeyx thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-iniciar-action-workflow" class="table-of-contents__link toc-highlight">1. Iniciar action workflow</a></li><li><a href="#2-obtener-el-total-de-numero-de-líneas-cambiadas-de-todos-los-archivos-de-tipo-lock" class="table-of-contents__link toc-highlight">2. Obtener el total de numero de líneas cambiadas de todos los archivos de tipo lock</a></li><li><a href="#3-calcular-los-valores-para-el-reporte" class="table-of-contents__link toc-highlight">3. Calcular los valores para el reporte</a></li><li><a href="#4-generar-el-mensaje-que-se-va-mostrar-en-el-reporte" class="table-of-contents__link toc-highlight">4. Generar el mensaje que se va mostrar en el reporte</a></li><li><a href="#5-eliminar-los-reportes-anteriores-de-los-comentarios" class="table-of-contents__link toc-highlight">5. Eliminar los reportes anteriores de los comentarios</a></li><li><a href="#6-mostramos-el-reporte-como-comentario-en-el-pull-request" class="table-of-contents__link toc-highlight">6. Mostramos el reporte como comentario en el pull request</a></li><li><a href="#7-comprobar-si-la-cantidad-de-líneas-modificadas-no-sobrepasa-el-limite" class="table-of-contents__link toc-highlight">7. Comprobar si la cantidad de líneas modificadas no sobrepasa el limite</a></li><li><a href="#8-resultados" class="table-of-contents__link toc-highlight">8. Resultados</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/new-rules-admin/wiki/docs/intro">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/new-rules-admin/wiki/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_fBYE"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Rules admin, Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>